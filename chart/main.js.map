{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.scss","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/d3-utils.ts","webpack:///./src/app/data.ts","webpack:///./src/app/edit.service.ts","webpack:///./src/app/edit/edit.component.html","webpack:///./src/app/edit/edit.component.scss","webpack:///./src/app/edit/edit.component.ts","webpack:///./src/app/edit/file-drop.directive.ts","webpack:///./src/app/edit/side-nav/side-nav.component.html","webpack:///./src/app/edit/side-nav/side-nav.component.scss","webpack:///./src/app/edit/side-nav/side-nav.component.ts","webpack:///./src/app/gallery/gallery-elem/gallery-elem.component.html","webpack:///./src/app/gallery/gallery-elem/gallery-elem.component.scss","webpack:///./src/app/gallery/gallery-elem/gallery-elem.component.ts","webpack:///./src/app/gallery/gallery.component.html","webpack:///./src/app/gallery/gallery.component.scss","webpack:///./src/app/gallery/gallery.component.ts","webpack:///./src/app/network.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { EditComponent } from './edit/edit.component';\r\nimport { GalleryComponent } from './gallery/gallery.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', redirectTo: '/edit', pathMatch: 'full'},\r\n  { path: 'edit', component: EditComponent },\r\n  { path: 'gallery', component: GalleryComponent },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","module.exports = \"<div id=\\\"wrapper\\\">\\r\\n    <mat-toolbar color=\\\"primary\\\">\\r\\n        <a [routerLink]=\\\"['/']\\\" class=\\\"mr-4\\\">Chart Dataset</a>\\r\\n        <a [routerLink]=\\\"['/edit']\\\" class=\\\"menu\\\">Editor</a>\\r\\n        <a [routerLink]=\\\"['/gallery']\\\" class=\\\"menu\\\">Gallery</a>\\r\\n    </mat-toolbar>\\r\\n    <router-outlet></router-outlet>\\r\\n</div>\\r\\n\\r\\n\"","module.exports = \"#wrapper {\\n  height: 100vh;\\n  width: 100vw; }\\n\\na {\\n  color: white;\\n  margin-right: 10px;\\n  text-decoration: none; }\\n\\na.menu {\\n  font-size: 15px;\\n  color: #EEE; }\\n\\na.menu:hover {\\n  opacity: 0.7; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvQzpcXFVzZXJzXFxqdW5ob2VcXEhDSUxcXGRldlxcY2hhcnQtZGF0YXNldFxcY2xpZW50L3NyY1xcYXBwXFxhcHAuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUFhO0VBQ2IsWUFBWSxFQUFBOztBQUdoQjtFQUNJLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIscUJBQXFCLEVBQUE7O0FBR3pCO0VBQ0ksZUFBZTtFQUNmLFdBQVcsRUFBQTs7QUFHZjtFQUNJLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiN3cmFwcGVyIHtcclxuICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICB3aWR0aDogMTAwdnc7XHJcbn1cclxuXHJcbmEge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG59XHJcblxyXG5hLm1lbnUge1xyXG4gICAgZm9udC1zaXplOiAxNXB4O1xyXG4gICAgY29sb3I6ICNFRUU7XHJcbn1cclxuXHJcbmEubWVudTpob3ZlciB7XHJcbiAgICBvcGFjaXR5OiAwLjc7XHJcbn1cclxuXHJcbiJdfQ== */\"","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { EditComponent } from './edit/edit.component';\r\nimport { FileDropDirective } from './edit/file-drop.directive';\r\n\r\nimport { MatSidenavModule, MatListModule, MatDividerModule,\r\n    MatIconModule, MatStepperModule, MatRadioModule, MatFormFieldModule,\r\n     MatButtonModule, MatInputModule, MatCheckboxModule, MatToolbarModule } from '@angular/material';\r\nimport { SideNavComponent } from './edit/side-nav/side-nav.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\nimport { GalleryComponent } from './gallery/gallery.component';\nimport { GalleryElemComponent } from './gallery/gallery-elem/gallery-elem.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent,\r\n        EditComponent,\r\n        FileDropDirective,\r\n        SideNavComponent,\r\n        GalleryComponent,\r\n        GalleryElemComponent,\r\n    ],\r\n    imports: [\r\n        BrowserModule,\r\n        AppRoutingModule,\r\n        BrowserAnimationsModule,\r\n        FormsModule, ReactiveFormsModule,\r\n        HttpClientModule,\r\n\r\n        MatSidenavModule, MatListModule,\r\n        MatDividerModule, MatIconModule,\r\n        MatStepperModule, MatRadioModule,\r\n        MatFormFieldModule, MatRadioModule,\r\n        MatButtonModule, MatInputModule,\r\n        MatCheckboxModule, MatToolbarModule,\r\n    ],\r\n    providers: [],\r\n    bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { ElementRef } from '@angular/core';\r\nimport * as d3 from 'd3';\r\n\r\nexport type SA = S<any, any>;\r\nexport type SB = S<d3.BaseType, {}>;\r\nexport type S<T extends d3.BaseType, D> = d3.Selection<T, D, Element, {}>;\r\nexport type TScale = d3.ScaleTime<number, number>;\r\nexport type LScale = d3.ScaleLinear<number, number>;\r\nexport type Range = [number, number];\r\n\r\nexport interface Mergeable {\r\n    merge(other: Mergeable);\r\n}\r\n\r\nexport interface LegendInfoMap {\r\n    [key: string]: LegendInfo;\r\n}\r\n\r\nexport interface LegendInfo {\r\n    attr: DataAttribute;\r\n    color: string;\r\n}\r\n\r\nexport interface DataAttribute {\r\n    value: string;\r\n    viewValue: string;\r\n}\r\n\r\nexport interface Margin {\r\n    left: number;\r\n    right: number;\r\n    top: number;\r\n    bottom: number;\r\n}\r\n\r\nexport interface Point {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport class Transform {\r\n    totalHeight: number;\r\n    totalWidth: number;\r\n    height: number;\r\n    width: number;\r\n    left: number;\r\n    bottom: number;\r\n    right: number;\r\n    top: number;\r\n\r\n    constructor(totalWidth: number, totalHeight: number, margin: Margin) {\r\n        this.totalWidth = totalWidth;\r\n        this.totalHeight = totalHeight;\r\n        this.height = this.totalHeight - margin.top - margin.bottom;\r\n        this.width = this.totalWidth - margin.left - margin.right;\r\n        this.left = margin.left;\r\n        this.right = margin.right;\r\n        this.bottom = margin.bottom;\r\n        this.top = margin.top;\r\n    }\r\n\r\n    createSVG(svgRef: ElementRef): S<d3.BaseType, {}> {\r\n        return d3.select(svgRef.nativeElement)\r\n            .attr('width', this.totalWidth)\r\n            .attr('height', this.totalHeight);\r\n    }\r\n\r\n    createG(svgRef: ElementRef): S<d3.BaseType, {}> {\r\n        return this.createSVG(svgRef).append('g')\r\n            .attr('transform', translate(this.left, this.top));\r\n    }\r\n\r\n    appendG(g: S<d3.BaseType, {}>) {\r\n        return g.append('g')\r\n            .attr('transform', translate(this.left, this.top));\r\n    }\r\n\r\n    xLinear(maxValue?: number): LScale {\r\n        let scale = d3.scaleLinear().range([0, this.width]);\r\n        return maxValue ? scale.domain([0, maxValue]) : scale;\r\n    }\r\n\r\n    yLinear(maxValue?: number): LScale {\r\n        const scale = d3.scaleLinear().range([this.height, 0]);\r\n        return maxValue ? scale.domain([0, maxValue]) : scale;\r\n    }\r\n}\r\n\r\nexport function log10TickFormat(d: number) {\r\n    const superscript = \"⁰¹²³⁴⁵⁶⁷⁸⁹\";\r\n    const power = Math.round(Math.log10(d));\r\n    return 10 + (power + \"\").split(\"\").map(c => superscript[c]).join(\"\");\r\n}\r\n\r\nexport function translate(x: number, y: number) {\r\n    return 'translate(' + x + ', ' + y + ')';\r\n}\r\n\r\nexport function addLegends(svg: S<any, {}>, width = 500, height = 40, legendData: LegendInfoMap, margin = 15, horizontal = true) {\r\n    let data = Object.values(legendData).slice();\r\n    if (horizontal) {\r\n        data = data.reverse();\r\n    }\r\n    const g = svg.append('g')\r\n        .selectAll('g')\r\n        .data(data)\r\n        .enter().append('g');\r\n\r\n    g.append('circle')\r\n        .attr('r', 3)\r\n        .attr('cx', 2)\r\n        .attr('cy', 11)\r\n        .attr('fill', d => d.color);\r\n\r\n    g.append('text')\r\n        .attr('dx', 10)\r\n        .attr('dy', 14)\r\n        .style('font-size', '0.8em')\r\n        .text(d => d.attr.viewValue);\r\n\r\n    let hOffset = 0;\r\n    g.attr('transform', (_, i, nodes) => {\r\n        hOffset += nodes[i].getBoundingClientRect().width;\r\n        if (i > 0) {\r\n            hOffset += margin;\r\n        }\r\n        if (!horizontal) {\r\n            hOffset = width;\r\n        }\r\n        const vOffset = horizontal ? height / 2 - 10 : i * 30;\r\n        return translate(width - hOffset, vOffset);\r\n    });\r\n}\r\n\r\nexport function binData<T extends Mergeable>(data: T[],\r\n    xKey: string,\r\n    yKey: string,\r\n    width: number): T[] {\r\n\r\n    const aggregateSize = Math.ceil(data.length / width);\r\n    if (aggregateSize <= 1) {\r\n        return data;\r\n    }\r\n    let aggCount = 0;\r\n    let binnedData = [];\r\n    let aggSizeData = [];\r\n\r\n    let newElem: T = null;\r\n\r\n    for (let elem of data) {\r\n\r\n        if (aggCount == 0) {\r\n            newElem = elem;\r\n            aggCount += 1;\r\n        } else if (aggCount < aggregateSize) {\r\n            newElem = newElem.merge(elem);\r\n            aggCount += 1;\r\n        } else {\r\n            newElem = newElem.merge(elem);\r\n            aggCount += 1\r\n            binnedData.push(newElem);\r\n            aggSizeData.push(aggCount);\r\n            aggCount = 0;\r\n        }\r\n    }\r\n\r\n    if (aggCount != 0) {\r\n        binnedData.push(newElem);\r\n        aggSizeData.push(aggCount);\r\n    }\r\n\r\n    binnedData.forEach((data, index) => data[xKey] /= aggSizeData[index]);\r\n    return binnedData;\r\n}\r\n","export class ImageElem {\r\n\r\n    public blob: Blob;\r\n    public index: number;\r\n    public name: string;\r\n    public src: string;\r\n\r\n    constructor(index: number, blob?: Blob, src?: string) {\r\n        this.index = index;\r\n        this.name = index.toString();\r\n        this.blob = blob;\r\n        this.src = src;\r\n    }\r\n\r\n    setImageInfo(blob: Blob, src: string) {\r\n        this.blob = blob;\r\n        this.src = src;\r\n    }\r\n}\r\n\r\nexport class ImageInfo {\r\n\r\n    public data: AnnotationData[];\r\n    public path: string;\r\n\r\n    constructor(raw: any) {\r\n        this.path = raw['path'];\r\n        this.data = raw['data'].map(elem => new AnnotationData(elem['semi'], elem['raw']));\r\n    }\r\n}\r\n\r\nexport class LegendInfo {\r\n    haveLegend: boolean;\r\n    height: number;\r\n    width: number;\r\n    x: number;\r\n    y: number;\r\n\r\n    constructor(raw: any) {\r\n\r\n    }\r\n}\r\n\r\nexport interface AxisInfo {\r\n    haveAxis: boolean;\r\n    height: number;\r\n    width: number;\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport class AnnotationData {\r\n\r\n    public semi: boolean;\r\n    public visType: string;\r\n    public legend: LegendInfo;\r\n    public xAxis: AxisInfo;\r\n    public yAxis: AxisInfo;\r\n\r\n    constructor(semi: boolean, raw: any) {\r\n        this.semi = semi;\r\n        this.visType = raw['visTypes'];\r\n        this.legend = raw['legend'];\r\n        this.xAxis = raw['xAxis'];\r\n        this.yAxis = raw['yAxis'];\r\n    }\r\n}\r\n\r\nexport interface Attr {\r\n    value: number | string;\r\n    viewValue: string;\r\n}\r\n\r\n\r\nexport const VIS_TYPES = [\r\n    'bar',\r\n    'line',\r\n    'pie',\r\n    'scatter',\r\n    'map',\r\n    'area',\r\n    'pareto',\r\n    'radar',\r\n    'table',\r\n    'venn',\r\n    'other',\r\n    'unknown',\r\n];\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\nimport { ImageElem } from './data';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class EditService {\r\n\r\n    public imagesSubject = new BehaviorSubject<ImageElem[]>([]);\r\n    public selectImageSubject = new Subject<ImageElem>();\r\n\r\n    constructor() {\r\n\r\n    }\r\n}\r\n","module.exports = \"<mat-sidenav-container class=\\\"w-100 h-100\\\">\\r\\n    <mat-sidenav mode=\\\"side\\\" opened id=\\\"side-nav\\\" class=\\\"w-25\\\">\\r\\n        <app-side-nav\\r\\n            [totalImageLength]=\\\"totalImageLength\\\"\\r\\n            [annotatedCount]=\\\"annotatedCount\\\">\\r\\n        </app-side-nav>\\r\\n    </mat-sidenav>\\r\\n    <mat-sidenav-content>\\r\\n        <div\\r\\n            class=\\\"m-3 p-3 w-100 h-75\\r\\n            d-flex\\\">\\r\\n            <div id=\\\"dropzone\\\" class=\\\"w-50 h-100\\r\\n        d-flex justify-content-center align-items-center\\r\\n        position-relative\\\"\\r\\n                [class.hovered]=\\\"dropzoneHovered\\\" [class.selected]=\\\"selectedImage\\\">\\r\\n\\r\\n                <!-- <h3 [class.selected]=\\\"selectedImage\\\">\\r\\n                    Drop Here\\r\\n                </h3> -->\\r\\n\\r\\n                <div class=\\\"position-absolute image-region\\\" [class.selected]=\\\"selectedImage\\\">\\r\\n                    <img #img>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"position-absolute image-region\\\" [class.selected]=\\\"selectedImage\\\">\\r\\n                    <svg #svg></svg>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"w-50 h-100\\\" *ngIf=\\\"selectedImage\\\">\\r\\n                <mat-vertical-stepper linear\\r\\n                    (selectionChange)=\\\"onStepChange($event)\\\"\\r\\n                    #stepper >\\r\\n                    <mat-step [stepControl]=\\\"formGroup.get('visTypes')\\\">\\r\\n                        <form [formGroup]=\\\"formGroup\\\">\\r\\n                            <ng-template matStepLabel>Select the type of this chart</ng-template>\\r\\n                            <div class=\\\"p-2 d-flex flex-wrap\\\">\\r\\n                                <mat-radio-group formControlName=\\\"visTypes\\\">\\r\\n                                    <mat-radio-button *ngFor=\\\"let visType of visTypes\\\" [value]=\\\"visType.value\\\" class=\\\"w-25\\\">\\r\\n                                        {{ visType.viewValue }}\\r\\n                                    </mat-radio-button>\\r\\n                                </mat-radio-group>\\r\\n                            </div>\\r\\n                            <div class=\\\"mt-2 text-right\\\">\\r\\n                                <button mat-stroked-button matStepperPrevious\\r\\n                                    class=\\\"mr-1\\\">Prev</button>\\r\\n                                <button mat-stroked-button matStepperNext>Next</button>\\r\\n                            </div>\\r\\n                        </form>\\r\\n                    </mat-step>\\r\\n                    <mat-step [stepControl]=\\\"formGroup.get('checkLegend')\\\">\\r\\n                        <form [formGroup]=\\\"formGroup\\\">\\r\\n                            <ng-template matStepLabel>Annotate a legend in the chart</ng-template>\\r\\n                            <div class=\\\"p-2\\\">\\r\\n                                <mat-checkbox\\r\\n                                    [formControl]=\\\"formGroup.get('legend.haveLegend')\\\"\\r\\n                                    (change)=\\\"onCheck($event, 'legend')\\\">\\r\\n                                    The chart has a legend\\r\\n                                </mat-checkbox>\\r\\n                                <ng-container *ngIf=\\\"formGroup.get('legend.haveLegend').value\\\">\\r\\n                                    <div class=\\\"p-2 d-flex flex-wrap\\\">\\r\\n                                        <div class=\\\"w-100 d-flex\\\">\\r\\n                                            <mat-form-field class=\\\"mr-3\\\">\\r\\n                                                <input matInput readonly placeholder=\\\"X\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('legend.x')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                            <mat-form-field>\\r\\n                                                <input matInput readonly placeholder=\\\"Y\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('legend.y')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"w-100 d-flex\\\">\\r\\n                                            <mat-form-field class=\\\"mr-3\\\">\\r\\n                                                <input matInput readonly placeholder=\\\"Width\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('legend.width')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                            <mat-form-field>\\r\\n                                                <input matInput readonly placeholder=\\\"Height\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('legend.height')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div *ngIf=\\\"formGroup.get('legend').invalid\\\" class=\\\"validate-feedback\\\">\\r\\n                                        * The area should be annotated, Please click the image\\r\\n                                    </div>\\r\\n                                </ng-container>\\r\\n                            </div>\\r\\n                            <div class=\\\"mt-2 text-right\\\">\\r\\n                                <button mat-stroked-button matStepperPrevious\\r\\n                                    class=\\\"mr-1\\\">Prev</button>\\r\\n                                <button mat-stroked-button matStepperNext>Next</button>\\r\\n                            </div>\\r\\n                        </form>\\r\\n                    </mat-step>\\r\\n                    <mat-step [stepControl]=\\\"formGroup.get('xAxis')\\\">\\r\\n                        <form [formGroup]=\\\"formGroup.get('xAxis')\\\">\\r\\n                            <ng-template matStepLabel>Annotate a X axis in the chart</ng-template>\\r\\n                            <div class=\\\"p-2 d-flex flex-wrap\\\">\\r\\n                                <mat-checkbox class=\\\"w-100\\\"\\r\\n                                    [formControl]=\\\"formGroup.get('xAxis.haveAxis')\\\"\\r\\n                                    (change)=\\\"onCheck($event, 'xAxis')\\\">\\r\\n                                    There is a X axis\\r\\n                                </mat-checkbox>\\r\\n                                <ng-container *ngIf=\\\"formGroup.get('xAxis.haveAxis').value\\\">\\r\\n                                     <div class=\\\"p-2 d-flex flex-wrap\\\">\\r\\n                                        <div class=\\\"w-100 d-flex\\\">\\r\\n                                            <mat-form-field class=\\\"mr-3\\\">\\r\\n                                                <input matInput readonly placeholder=\\\"X\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('xAxis.x')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                            <mat-form-field>\\r\\n                                                <input matInput readonly placeholder=\\\"Y\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('xAxis.y')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"w-100 d-flex\\\">\\r\\n                                            <mat-form-field class=\\\"mr-3\\\">\\r\\n                                                <input matInput readonly placeholder=\\\"Width\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('xAxis.width')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                            <mat-form-field>\\r\\n                                                <input matInput readonly placeholder=\\\"Height\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('xAxis.height')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"w-100 mt-2 d-flex\\\">\\r\\n                                        <div class=\\\"mr-3 form-label\\\">\\r\\n                                            Type\\r\\n                                        </div>\\r\\n                                        <mat-radio-group formControlName=\\\"type\\\">\\r\\n                                            <mat-radio-button value=\\\"0\\\">Nominal</mat-radio-button>\\r\\n                                            <mat-radio-button value=\\\"1\\\">Linear</mat-radio-button>\\r\\n                                            <mat-radio-button value=\\\"2\\\">Logarithm</mat-radio-button>\\r\\n                                        </mat-radio-group>\\r\\n                                    </div>\\r\\n                                    <div *ngIf=\\\"formGroup.get('xAxis').invalid\\\" class=\\\"validate-feedback\\\">\\r\\n                                        * The axis and the axis tick values should be annotated, Please click the image\\r\\n                                    </div>\\r\\n                                </ng-container>\\r\\n                            </div>\\r\\n                            <div class=\\\"mt-2 text-right\\\">\\r\\n                                <button mat-stroked-button matStepperPrevious\\r\\n                                    class=\\\"mr-1\\\">Prev</button>\\r\\n                                <button mat-stroked-button matStepperNext>Next</button>\\r\\n                            </div>\\r\\n                        </form>\\r\\n                    </mat-step>\\r\\n                    <mat-step [stepControl]=\\\"formGroup.get('yAxis')\\\">\\r\\n                        <form [formGroup]=\\\"formGroup.get('yAxis')\\\">\\r\\n                            <ng-template matStepLabel>Annotate a Y axis in the chart</ng-template>\\r\\n                            <div class=\\\"p-2 d-flex flex-wrap\\\">\\r\\n                                <mat-checkbox class=\\\"w-100\\\"\\r\\n                                    [formControl]=\\\"formGroup.get('yAxis.haveAxis')\\\"\\r\\n                                    (change)=\\\"onCheck($event, 'yAxis')\\\">\\r\\n                                    There is a Y axis\\r\\n                                </mat-checkbox>\\r\\n                                <ng-container *ngIf=\\\"formGroup.get('yAxis.haveAxis').value\\\">\\r\\n                                    <div class=\\\"p-2 d-flex flex-wrap\\\">\\r\\n                                        <div class=\\\"w-100 d-flex\\\">\\r\\n                                            <mat-form-field class=\\\"mr-3\\\">\\r\\n                                                <input matInput readonly placeholder=\\\"X\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('yAxis.x')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                            <mat-form-field>\\r\\n                                                <input matInput readonly placeholder=\\\"Y\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('yAxis.y')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"w-100 d-flex\\\">\\r\\n                                            <mat-form-field class=\\\"mr-3\\\">\\r\\n                                                <input matInput readonly placeholder=\\\"Width\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('yAxis.width')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                            <mat-form-field>\\r\\n                                                <input matInput readonly placeholder=\\\"Height\\\" type=\\\"number\\\"\\r\\n                                                    [formControl]=\\\"formGroup.get('yAxis.height')\\\">\\r\\n                                            </mat-form-field>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"w-100 mt-2 d-flex\\\">\\r\\n                                        <div class=\\\"mr-3 form-label\\\">\\r\\n                                            Type\\r\\n                                        </div>\\r\\n                                        <mat-radio-group formControlName=\\\"type\\\">\\r\\n                                            <mat-radio-button value=\\\"0\\\">Nominal</mat-radio-button>\\r\\n                                            <mat-radio-button value=\\\"1\\\">Linear</mat-radio-button>\\r\\n                                            <mat-radio-button value=\\\"2\\\">Logarithm</mat-radio-button>\\r\\n                                        </mat-radio-group>\\r\\n                                    </div>\\r\\n                                    <div *ngIf=\\\"formGroup.get('yAxis').invalid\\\" class=\\\"validate-feedback\\\">\\r\\n                                        * The axis and the axis tick values should be annotated, Please click the image\\r\\n                                    </div>\\r\\n                                </ng-container>\\r\\n                            </div>\\r\\n                            <div class=\\\"mt-2 text-right\\\">\\r\\n                                <button mat-stroked-button matStepperPrevious\\r\\n                                    class=\\\"mr-1\\\">Prev</button>\\r\\n                                <button mat-stroked-button matStepperNext\\r\\n                                    (click)=\\\"submit()\\\">Submit</button>\\r\\n                            </div>\\r\\n                        </form>\\r\\n                    </mat-step>\\r\\n                </mat-vertical-stepper>\\r\\n            </div>\\r\\n        </div>\\r\\n    </mat-sidenav-content>\\r\\n</mat-sidenav-container>\\r\\n\"","module.exports = \"#dropzone {\\n  border-radius: 10px;\\n  border: 3px dashed #AAA; }\\n\\n#dropzone.hovered:not(.selected) {\\n  border-color: skyblue;\\n  border-style: solid;\\n  cursor: copy; }\\n\\n#dropzone.selected {\\n  border: 1px solid #AAA;\\n  background-color: #CCC; }\\n\\nh3.selected {\\n  display: none; }\\n\\nimg {\\n  max-width: 600px;\\n  max-height: 800px;\\n  -o-object-fit: contain;\\n     object-fit: contain; }\\n\\n::ng-deep circle.handle {\\n  cursor: crosshair; }\\n\\n::ng-deep rect.handle {\\n  cursor: -webkit-grab;\\n  cursor: grab; }\\n\\n.image-region:not(.selected) {\\n  display: none; }\\n\\n#side-nav {\\n  border-right: 2px solid #AAA; }\\n\\nmat-radio-button {\\n  margin: 0 12px; }\\n\\n.validate-feedback {\\n  color: #f44336;\\n  font-size: 12px; }\\n\\n.form-label {\\n  width: 50px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZWRpdC9DOlxcVXNlcnNcXGp1bmhvZVxcSENJTFxcZGV2XFxjaGFydC1kYXRhc2V0XFxjbGllbnQvc3JjXFxhcHBcXGVkaXRcXGVkaXQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxtQkFBbUI7RUFDbkIsdUJBQXVCLEVBQUE7O0FBRzNCO0VBQ0kscUJBQXFCO0VBQ3JCLG1CQUFtQjtFQUNuQixZQUFZLEVBQUE7O0FBR2hCO0VBQ0ksc0JBQXNCO0VBQ3RCLHNCQUFzQixFQUFBOztBQUcxQjtFQUNJLGFBQWEsRUFBQTs7QUFHakI7RUFDSSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLHNCQUFtQjtLQUFuQixtQkFBbUIsRUFBQTs7QUFHdkI7RUFFUSxpQkFBaUIsRUFBQTs7QUFGekI7RUFNUSxvQkFBWTtFQUFaLFlBQVksRUFBQTs7QUFJcEI7RUFDSSxhQUFhLEVBQUE7O0FBR2pCO0VBQ0ksNEJBQTRCLEVBQUE7O0FBR2hDO0VBQ0ksY0FBYyxFQUFBOztBQUlsQjtFQUNJLGNBQWM7RUFDZCxlQUFlLEVBQUE7O0FBR25CO0VBQ0ksV0FBVyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvZWRpdC9lZGl0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2Ryb3B6b25lIHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBib3JkZXI6IDNweCBkYXNoZWQgI0FBQTtcclxufVxyXG5cclxuI2Ryb3B6b25lLmhvdmVyZWQ6bm90KC5zZWxlY3RlZCkge1xyXG4gICAgYm9yZGVyLWNvbG9yOiBza3libHVlO1xyXG4gICAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuICAgIGN1cnNvcjogY29weTtcclxufVxyXG5cclxuI2Ryb3B6b25lLnNlbGVjdGVkIHtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNBQUE7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG5oMy5zZWxlY3RlZCB7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG5pbWcge1xyXG4gICAgbWF4LXdpZHRoOiA2MDBweDtcclxuICAgIG1heC1oZWlnaHQ6IDgwMHB4O1xyXG4gICAgb2JqZWN0LWZpdDogY29udGFpbjtcclxufVxyXG5cclxuOjpuZy1kZWVwIHtcclxuICAgIGNpcmNsZS5oYW5kbGUge1xyXG4gICAgICAgIGN1cnNvcjogY3Jvc3NoYWlyO1xyXG4gICAgfVxyXG5cclxuICAgIHJlY3QuaGFuZGxlIHtcclxuICAgICAgICBjdXJzb3I6IGdyYWI7XHJcbiAgICB9XHJcbn1cclxuXHJcbi5pbWFnZS1yZWdpb246bm90KC5zZWxlY3RlZCkge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuI3NpZGUtbmF2IHtcclxuICAgIGJvcmRlci1yaWdodDogMnB4IHNvbGlkICNBQUE7XHJcbn1cclxuXHJcbm1hdC1yYWRpby1idXR0b24ge1xyXG4gICAgbWFyZ2luOiAwIDEycHg7XHJcbn1cclxuXHJcblxyXG4udmFsaWRhdGUtZmVlZGJhY2sge1xyXG4gICAgY29sb3I6ICNmNDQzMzY7XHJcbiAgICBmb250LXNpemU6IDEycHg7XHJcbn1cclxuXHJcbi5mb3JtLWxhYmVsIHtcclxuICAgIHdpZHRoOiA1MHB4O1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { ImageElem, Attr } from '../data';\r\n\r\nimport * as d3 from 'd3';\r\nimport { EditService } from '../edit.service';\r\nimport { FormGroup, FormBuilder, AbstractControl } from '@angular/forms';\r\nimport { StepperSelectionEvent } from '@angular/cdk/stepper';\r\nimport { MatCheckboxChange, MatVerticalStepper } from '@angular/material';\r\nimport { SB } from '../d3-utils';\r\nimport { NetworkService } from '../network.service';\r\n\r\n@Component({\r\n    selector: 'app-edit',\r\n    templateUrl: './edit.component.html',\r\n    styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent implements OnInit {\r\n\r\n    @ViewChild('img') imgRef: ElementRef;\r\n    @ViewChild('svg') svgRef: ElementRef;\r\n    @ViewChild(MatVerticalStepper) stepper: MatVerticalStepper;\r\n\r\n    public selectedImage: ImageElem;\r\n    public imageList: ImageElem[] = [];\r\n    public formGroup: FormGroup;\r\n    public interestGroup: FormGroup;\r\n    public visTypes: Attr[] = [\r\n        { value: 'bar', viewValue: 'Bar Chart' },\r\n        { value: 'line', viewValue: 'Line Chart' },\r\n        { value: 'pie', viewValue: 'Pie Chart'},\r\n        { value: 'scatter', viewValue: 'Scatter Plot'},\r\n        { value: 'map', viewValue: 'Geographical Map' },\r\n        { value: 'area', viewValue: 'Area Chart' },\r\n        { value: 'pareto', viewValue: 'Pareto Chart' },\r\n        { value: 'radar', viewValue: 'Radar Chart' },\r\n        { value: 'table', viewValue: 'Table' },\r\n        { value: 'venn', viewValue: 'Venn Diagram' },\r\n        { value: 'other', viewValue: 'Other' },\r\n        { value: 'unknown', viewValue: 'Unknown' },\r\n    ];\r\n    public totalImageLength = 0;\r\n    public annotatedCount = 0;\r\n\r\n    private currStepIndex = 0;\r\n    private legendState = 0;\r\n    private xAxisState = 0;\r\n    private yAxisState = 0;\r\n    private svg: SB;\r\n    constructor(private edit: EditService, private fb: FormBuilder, private network: NetworkService) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.initFormGroup();\r\n        this.svg = d3.select(this.svgRef.nativeElement);\r\n        this.network.getList()\r\n            .then(indices => {\r\n                this.imageList = indices.map(index => new ImageElem(index));\r\n                const requests = indices.map(index => this.network.getImage(index.toString()));\r\n                Promise.all(requests).then(images => {\r\n                    images.forEach((image, i) => {\r\n                        this.parseImage(image, i, indices[i].toString());\r\n                    });\r\n                });\r\n            });\r\n\r\n        this.network.getTotalImageLength().then(length => {\r\n            this.totalImageLength = length;\r\n        });\r\n\r\n        this.edit.selectImageSubject.asObservable().subscribe(image => {\r\n            this.selectedImage = image;\r\n            this.initFormGroup();\r\n            const imgElem = this.imgRef.nativeElement;\r\n            imgElem.src = null;\r\n            this.svg.selectAll('g').remove();\r\n            imgElem.addEventListener('load', () => {\r\n                const boundingBox = (this.imgRef.nativeElement as Element).getBoundingClientRect();\r\n                this.initSVG(boundingBox);\r\n\r\n            });\r\n            imgElem.src = image.src;\r\n        });\r\n    }\r\n\r\n    submit() {\r\n        this.network.submit(this.imgRef.nativeElement, this.selectedImage, this.formGroup)\r\n            .then(index => {\r\n                this.annotatedCount += 1;\r\n                this.imageList.splice(this.imageList\r\n                    .findIndex(d => d.name === this.selectedImage.name), 1);\r\n                this.imageList.push(new ImageElem(index));\r\n                this.edit.imagesSubject.next(this.imageList);\r\n                this.selectedImage = this.imageList[0];\r\n                this.edit.selectImageSubject.next(this.selectedImage);\r\n                this.network.getImage(index.toString()).then(image => {\r\n                    this.parseImage(image, this.imageList.length - 1, index.toString());\r\n                });\r\n                this.initFormGroup();\r\n                this.legendState = 0;\r\n                this.xAxisState = 0;\r\n                this.yAxisState = 0;\r\n                this.stepper.reset();\r\n            });\r\n    }\r\n\r\n    onStepChange(change: StepperSelectionEvent) {\r\n        this.currStepIndex = change.selectedIndex;\r\n        switch (change.selectedIndex) {\r\n            case 1:\r\n                this.registerAreaEvent('legend');\r\n                break;\r\n            case 2:\r\n                this.registerAreaEvent('xAxis');\r\n                break;\r\n            case 3:\r\n                this.registerAreaEvent('yAxis');\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        switch (change.previouslySelectedIndex) {\r\n            case 1:\r\n                if (this.legendState < 2) {\r\n                    d3.select('.legend').remove();\r\n                    this.legendState = 0;\r\n                    this.initAreaForm(this.formGroup.get('legend'));\r\n                } else {\r\n                    d3.select('.legend').attr('display', 'none');\r\n                }\r\n                break;\r\n            case 2:\r\n                if (this.xAxisState < 2) {\r\n                    d3.select('.xAxis').remove();\r\n                    this.xAxisState = 0;\r\n                    this.initAreaForm(this.formGroup.get('xAxis'));\r\n                } else {\r\n                    d3.select('.xAxis').attr('display', 'none');\r\n                }\r\n                break;\r\n            case 3:\r\n                if (this.yAxisState < 2) {\r\n                    d3.select('.yAxis').remove();\r\n                    this.yAxisState = 0;\r\n                    this.initAreaForm(this.formGroup.get('yAxis'));\r\n                } else {\r\n                    d3.select('.yAxis').attr('display', 'none');\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onCheck(change: MatCheckboxChange, key: string) {\r\n        const resetState = () => {\r\n            switch (key) {\r\n                case 'legend':\r\n                    this.legendState = 0;\r\n                    break;\r\n                case 'xAxis':\r\n                    this.xAxisState = 0;\r\n                    break;\r\n                case 'yAxis':\r\n                    this.yAxisState = 0;\r\n                    break;\r\n            }\r\n        };\r\n\r\n        if (!change.checked) {\r\n            resetState();\r\n            d3.select(`.${key}`).remove();\r\n            this.svg.on('click', () => {});\r\n        } else {\r\n            const group = this.formGroup.get(key);\r\n            this.initAreaForm(group);\r\n            this.registerAreaEvent(key);\r\n        }\r\n    }\r\n\r\n    initFormGroup() {\r\n        this.formGroup = this.fb.group({\r\n            visTypes: this.fb.control(this.visTypes[0].value),\r\n            legend: this.fb.group({\r\n                haveLegend: this.fb.control(false),\r\n                x: this.fb.control(''),\r\n                y: this.fb.control(''),\r\n                width: this.fb.control(''),\r\n                height: this.fb.control(''),\r\n            }),\r\n            xAxis: this.fb.group({\r\n                haveAxis: this.fb.control(false),\r\n                x: this.fb.control(''),\r\n                y: this.fb.control(''),\r\n                width: this.fb.control(''),\r\n                height: this.fb.control(''),\r\n                type: this.fb.control('0'),\r\n            }),\r\n            yAxis: this.fb.group({\r\n                haveAxis: this.fb.control(false),\r\n                x: this.fb.control(''),\r\n                y: this.fb.control(''),\r\n                width: this.fb.control(''),\r\n                height: this.fb.control(''),\r\n                type: this.fb.control('0'),\r\n            }),\r\n        });\r\n\r\n        this.formGroup.get('legend').setValidators(() => {\r\n            const group = this.formGroup.get('legend');\r\n            if (group.get('haveLegend').value && this.legendState < 2) {\r\n                return {\r\n                    required: true\r\n                };\r\n            } else {\r\n                return null;\r\n            }\r\n        });\r\n\r\n        this.formGroup.get('xAxis').setValidators(() => {\r\n            const group = this.formGroup.get('xAxis');\r\n            if (group.get('haveAxis').value && this.xAxisState < 2) {\r\n                return {\r\n                    required: true\r\n                };\r\n            } else {\r\n                return null;\r\n            }\r\n        });\r\n\r\n        this.formGroup.get('yAxis').setValidators(() => {\r\n            const group = this.formGroup.get('yAxis');\r\n            if (group.get('haveAxis').value && this.yAxisState < 2) {\r\n                return {\r\n                    required: true\r\n                };\r\n            } else {\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n\r\n    private parseImage(image: Blob, index: number, name: string) {\r\n        const reader = new FileReader();\r\n        reader.onload = (_: Event) => {\r\n            this.imageList[index].setImageInfo(image as Blob, reader.result as string);\r\n            this.edit.imagesSubject.next(this.imageList);\r\n        };\r\n        reader.readAsDataURL(image);\r\n    }\r\n\r\n    private initSVG(boundingBox: ClientRect) {\r\n        this.svg = d3.select(this.svgRef.nativeElement)\r\n            .attr('width', boundingBox.width + 20)\r\n            .attr('height', boundingBox.height + 20).attr('pointer-events', 'visiblePoint');\r\n    }\r\n\r\n    private initAreaForm(group: AbstractControl) {\r\n        group.get('x').setValue('');\r\n        group.get('y').setValue('');\r\n        group.get('width').setValue('');\r\n        group.get('height').setValue('');\r\n    }\r\n\r\n    private registerAreaEvent(type='xAxis') {\r\n\r\n        d3.select(`.${type}`).attr('display', '');\r\n        const svg = this.svg;\r\n        const left = (svg.node() as Element).getBoundingClientRect().left;\r\n        const top = (svg.node() as Element).getBoundingClientRect().top;\r\n        let pivotX = 0;\r\n        let pivotY = 0;\r\n\r\n        const stepIndex = () => {\r\n            switch (type) {\r\n                case 'legend':\r\n                    return 1;\r\n                case 'xAxis':\r\n                    return 2;\r\n                case 'yAxis':\r\n                    return 3;\r\n            }\r\n        };\r\n\r\n        const state = (value?: number) => {\r\n            switch (type) {\r\n                case 'legend':\r\n                    return value ? (this.legendState = value) : this.legendState;\r\n                case 'xAxis':\r\n                    return value ? (this.xAxisState = value) : this.xAxisState;\r\n                case 'yAxis':\r\n                    return value ? (this.yAxisState = value) : this.yAxisState;\r\n                default:\r\n                    return 0;\r\n            }\r\n        };\r\n\r\n        svg.on('click', () => {\r\n\r\n            const obtainPoints = (x: number, y: number, width: number, height: number) => {\r\n                return [\r\n                    { cx: x, cy: y, pivotX: x + width, pivotY: y + height, },\r\n                    { cx: x + width, cy: y, pivotX: x, pivotY: y + height, },\r\n                    { cx: x, cy: y + height, pivotX: x + width, pivotY: y },\r\n                    { cx: x + width, cy: y + height, pivotX: x, pivotY: y },\r\n                ];\r\n            };\r\n\r\n            const formGroup = this.formGroup.get(type);\r\n            const checked = () => {\r\n                switch (type) {\r\n                    case 'xAxis':\r\n                    case 'yAxis':\r\n                        return formGroup.get('haveAxis').value;\r\n                    case 'legend':\r\n                        return formGroup.get('haveLegend').value;\r\n                }\r\n            };\r\n            if (this.currStepIndex === stepIndex() && checked()) {\r\n                if (state() === 0) {\r\n                    const x = d3.event.x - left;\r\n                    const y = d3.event.y - top;\r\n\r\n                    const g = svg.append('g').attr('class', type);\r\n\r\n                    g.append('rect')\r\n                        .attr('class', 'handle')\r\n                        .attr('x', x).attr('y', y)\r\n                        .attr('stroke-width', 2)\r\n                        .attr('stroke', 'red')\r\n                        .attr('fill', 'rgba(255, 0, 0, 0.2)');\r\n\r\n                    formGroup.get('x').setValue(x.toFixed(0));\r\n                    formGroup.get('y').setValue(y.toFixed(0));\r\n                    pivotX = x;\r\n                    pivotY = y;\r\n                    formGroup.get('width').setValue('0');\r\n                    formGroup.get('height').setValue('0');\r\n                    state(1);\r\n                } else if (state() === 1) {\r\n                    const g = svg.select(`.${type}`);\r\n                    let x = +g.select('rect').attr('x');\r\n                    let y = +g.select('rect').attr('y');\r\n                    let width = +g.select('rect').attr('width');\r\n                    let height = +g.select('rect').attr('height');\r\n\r\n                    let points = obtainPoints(x, y, width, height);\r\n                    const circleS = g.selectAll('circle')\r\n                        .data(points).enter()\r\n                        .append('circle').attr('class', 'handle')\r\n                        .attr('cx', d => d.cx)\r\n                        .attr('cy', d => d.cy)\r\n                        .attr('r', 5).attr('fill', 'darkorange');\r\n                        circleS.call(d3.drag().on('drag', (d: any) => {\r\n                            const pivotX = d.pivotX;\r\n                            const pivotY = d.pivotY;\r\n                            const eventX = d3.event.x;\r\n                            const eventY = d3.event.y;\r\n                            x = eventX > pivotX ? pivotX : eventX;\r\n                            y = eventY > pivotY ? pivotY : eventY;\r\n                            width = Math.abs(eventX - pivotX);\r\n                            height = Math.abs(eventY - pivotY);\r\n\r\n                            g.select('rect')\r\n                                .attr('x', x)\r\n                                .attr('y', y)\r\n                                .attr('width', width)\r\n                                .attr('height', height);\r\n\r\n                            points = obtainPoints(x, y, width, height);\r\n\r\n                            circleS.data(points)\r\n                                .attr('cx', d => d.cx)\r\n                                .attr('cy', d => d.cy);\r\n\r\n                            const formGroup = this.formGroup.get(type);\r\n                            formGroup.get('x').setValue(x.toFixed(0));\r\n                            formGroup.get('y').setValue(y.toFixed(0));\r\n                            formGroup.get('width').setValue(width.toFixed(0));\r\n                            formGroup.get('height').setValue(height.toFixed(0));\r\n\r\n                        }));\r\n\r\n                    let dragStartX = 0;\r\n                    let dragStartY = 0;\r\n                    g.select('rect').call(d3.drag()\r\n                        .on('start', () => {\r\n                            dragStartX = d3.event.x;\r\n                            dragStartY = d3.event.y;\r\n                            pivotX = +g.select('rect').attr('x');\r\n                            pivotY = +g.select('rect').attr('y');\r\n                        })\r\n                        .on('drag', () => {\r\n                            const eventX = d3.event.x;\r\n                            const eventY = d3.event.y;\r\n                            const moveX = eventX - dragStartX;\r\n                            const moveY = eventY - dragStartY;\r\n                            x = pivotX + moveX;\r\n                            y = pivotY + moveY;\r\n\r\n                            g.select('rect').attr('x', x).attr('y', y);\r\n\r\n                            points = obtainPoints(x, y, width, height);\r\n                            circleS.data(points)\r\n                                .attr('cx', d => d.cx)\r\n                                .attr('cy', d => d.cy);\r\n\r\n                            const formGroup = this.formGroup.get(type);\r\n                            formGroup.get('x').setValue(x.toFixed(0));\r\n                            formGroup.get('y').setValue(y.toFixed(0));\r\n                            formGroup.get('width').setValue(width.toFixed(0));\r\n                            formGroup.get('height').setValue(height.toFixed(0));\r\n                        }));\r\n\r\n                    state(2);\r\n                    this.formGroup.get(type).updateValueAndValidity();\r\n                }\r\n            }\r\n        });\r\n\r\n        svg.on('mousemove', () => {\r\n            if (this.currStepIndex === stepIndex() && state() === 1) {\r\n                const eventX = d3.event.x - left;\r\n                const eventY = d3.event.y - top;\r\n                const x = eventX > pivotX ? pivotX : eventX;\r\n                const y = eventY > pivotY ? pivotY : eventY;\r\n                const width = Math.abs(eventX - pivotX);\r\n                const height = Math.abs(eventY - pivotY);\r\n\r\n                svg.select(`.${type}`).select('rect')\r\n                    .attr('x', x)\r\n                    .attr('y', y)\r\n                    .attr('width', width)\r\n                    .attr('height', height);\r\n\r\n                const formGroup = this.formGroup.get(type);\r\n                formGroup.get('x').setValue(x.toFixed(0));\r\n                formGroup.get('y').setValue(y.toFixed(0));\r\n                formGroup.get('width').setValue(width.toFixed(0));\r\n                formGroup.get('height').setValue(height.toFixed(0));\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { Directive, Output, EventEmitter, HostListener } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[fileDrop]'\r\n})\r\nexport class FileDropDirective {\r\n\r\n    @Output() filesDropped = new EventEmitter<FileList>();\r\n    @Output() filesHovered = new EventEmitter<boolean>();\r\n\r\n    constructor() { }\r\n\r\n    @HostListener('drop', ['$event']) onDrop($event: DragEvent) {\r\n        $event.preventDefault();\r\n        this.filesDropped.emit($event.dataTransfer.files);\r\n        this.filesHovered.emit(false);\r\n    }\r\n\r\n    @HostListener('dragover', ['$event']) onDragOver($event: DragEvent) {\r\n        $event.preventDefault();\r\n        this.filesHovered.emit(true);\r\n    }\r\n\r\n    @HostListener('dragleave', ['$event']) onDragLeave($event: DragEvent) {\r\n        $event.preventDefault();\r\n        this.filesHovered.emit(false);\r\n    }\r\n}\r\n","module.exports = \"<mat-list>\\r\\n    <div mat-list-item mat-subheader class=\\\"p-2 pl-3\\\">\\r\\n        Progress: {{ annotatedCount }} / {{ totalImageLength }}\\r\\n    </div>\\r\\n</mat-list>\\r\\n<mat-action-list>\\r\\n    <button mat-list-item mat-subheader\\r\\n        (click)=\\\"projectShow = !projectShow\\\">\\r\\n        <div class=\\\"w-100 px-1\\r\\n            d-flex justify-content-between align-items-center\\\">\\r\\n            <div>Image List</div>\\r\\n            <div>\\r\\n                <mat-icon>{{ projectShow ? 'remove' : 'add_circle_outline'}}</mat-icon>\\r\\n            </div>\\r\\n        </div>\\r\\n    </button>\\r\\n    <ng-container *ngIf=\\\"projectShow\\\">\\r\\n        <button mat-list-item *ngFor=\\\"let image of images\\\"\\r\\n        [class.selected]=\\\"selectedImage && image.name === selectedImage.name\\\"\\r\\n        (click)=\\\"selectImage(image)\\\">\\r\\n            {{ image.name }}\\r\\n        </button>\\r\\n    </ng-container>\\r\\n    <mat-divider></mat-divider>\\r\\n</mat-action-list>\\r\\n\"","module.exports = \"button.selected {\\n  background-color: rgba(0, 0, 0, 0.04); }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZWRpdC9zaWRlLW5hdi9DOlxcVXNlcnNcXGp1bmhvZVxcSENJTFxcZGV2XFxjaGFydC1kYXRhc2V0XFxjbGllbnQvc3JjXFxhcHBcXGVkaXRcXHNpZGUtbmF2XFxzaWRlLW5hdi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFDQUFxQyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvZWRpdC9zaWRlLW5hdi9zaWRlLW5hdi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImJ1dHRvbi5zZWxlY3RlZCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMDQpO1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { EditService } from 'src/app/edit.service';\r\nimport { ImageElem } from 'src/app/data';\r\n\r\n@Component({\r\n    selector: 'app-side-nav',\r\n    templateUrl: './side-nav.component.html',\r\n    styleUrls: ['./side-nav.component.scss']\r\n})\r\nexport class SideNavComponent implements OnInit {\r\n\r\n    @Input() totalImageLength: number;\r\n    @Input() annotatedCount: number;\r\n\r\n    public images = [];\r\n    public selectedImage: ImageElem;\r\n    public projectShow = true;\r\n\r\n    constructor(private edit: EditService) { }\r\n\r\n    ngOnInit() {\r\n        this.edit.imagesSubject.asObservable().subscribe(images => {\r\n            this.images = images;\r\n        });\r\n\r\n        this.edit.selectImageSubject.asObservable().subscribe(image => {\r\n            this.selectedImage = image;\r\n        });\r\n\r\n    }\r\n\r\n    selectImage(image: ImageElem) {\r\n        this.edit.selectImageSubject.next(image);\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"w-100 h-100 d-flex justify-content-center align-items-center flex-column p-3\\\">\\n    <div class=\\\"p-2 w-100 h-35\\\">\\n        <div>\\n            File path: {{ info ? info.path : ''}}\\n        </div>\\n        <svg #hist>\\n        </svg>\\n    </div>\\n    <div class=\\\"w-100 h-65 position-relative border\\\">\\n        <div class=\\\"position-absolute w-100 h-100 p-2\\\">\\n            <img #img>\\n        </div>\\n        <div class=\\\"position-absolute w-100 h-100 p-2\\\">\\n            <svg #svg></svg>\\n        </div>\\n    </div>\\n</div>\\n\"","module.exports = \"img {\\n  width: 100%;\\n  -o-object-fit: contain;\\n     object-fit: contain;\\n  max-width: 340px;\\n  max-height: 320px; }\\n\\n.h-35 {\\n  height: 35% !important; }\\n\\n.h-65 {\\n  height: 65% !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZ2FsbGVyeS9nYWxsZXJ5LWVsZW0vQzpcXFVzZXJzXFxqdW5ob2VcXEhDSUxcXGRldlxcY2hhcnQtZGF0YXNldFxcY2xpZW50L3NyY1xcYXBwXFxnYWxsZXJ5XFxnYWxsZXJ5LWVsZW1cXGdhbGxlcnktZWxlbS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQVc7RUFDWCxzQkFBbUI7S0FBbkIsbUJBQW1CO0VBQ25CLGdCQUFnQjtFQUNoQixpQkFBaUIsRUFBQTs7QUFHckI7RUFDSSxzQkFBc0IsRUFBQTs7QUFHMUI7RUFDSSxzQkFBc0IsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2dhbGxlcnkvZ2FsbGVyeS1lbGVtL2dhbGxlcnktZWxlbS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImltZyB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG9iamVjdC1maXQ6IGNvbnRhaW47XHJcbiAgICBtYXgtd2lkdGg6IDM0MHB4O1xyXG4gICAgbWF4LWhlaWdodDogMzIwcHg7XHJcbn1cclxuXHJcbi5oLTM1IHtcclxuICAgIGhlaWdodDogMzUlICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5oLTY1IHtcclxuICAgIGhlaWdodDogNjUlICFpbXBvcnRhbnQ7XHJcbn1cclxuIl19 */\"","import { Component, OnInit, Input, ViewChild, ElementRef } from '@angular/core';\nimport { ImageElem, ImageInfo, VIS_TYPES } from 'src/app/data';\nimport { NetworkService } from 'src/app/network.service';\n\nimport * as d3 from 'd3';\nimport { Transform, SB, translate } from 'src/app/d3-utils';\n\n@Component({\n    selector: 'app-gallery-elem',\n    templateUrl: './gallery-elem.component.html',\n    styleUrls: ['./gallery-elem.component.scss']\n})\nexport class GalleryElemComponent implements OnInit {\n\n    @ViewChild('img') imgRef: ElementRef;\n    @ViewChild('svg') svgRef: ElementRef;\n    @ViewChild('hist') histRef: ElementRef;\n\n    @Input() imageElem: ImageElem;\n\n    public info: ImageInfo;\n    private histTf = new Transform(320, 100, { top: 10, left: 25, right: 5, bottom: 50 });\n    private histG: SB;\n\n    constructor(private network: NetworkService) { }\n\n    ngOnInit() {\n        this.network.getImage(this.imageElem.name)\n            .then(image => {\n                const reader = new FileReader();\n                reader.onload = (_) => {\n                    this.imageElem.setImageInfo(image as Blob, reader.result as string);\n                    const img = this.imgRef.nativeElement;\n                    img.addEventListener('load', () => {\n                        const boundingBox = (this.imgRef.nativeElement as Element).getBoundingClientRect();\n                        d3.select(this.svgRef.nativeElement)\n                            .attr('width', boundingBox.width)\n                            .attr('height', boundingBox.height);\n\n                        this.network.getAnnotation(this.imageElem.name)\n                            .then(info => {\n                                this.info = info;\n                                this.drawAnnotation();\n                                this.drawHistogram();\n                            });\n                    });\n                    img.src = reader.result;\n                };\n                reader.readAsDataURL(image);\n            });\n\n        this.histG = this.histTf.createG(this.histRef);\n    }\n\n\n    private drawAnnotation() {\n        this.drawRect('legend', 'yellow');\n        this.drawRect('xAxis', 'darkorange');\n        this.drawRect('yAxis', 'indigo');\n    }\n\n    private drawRect(key: string, color: string) {\n        const img = this.imgRef.nativeElement as HTMLImageElement;\n        const ratio = img.getBoundingClientRect().height / img.naturalHeight;\n        d3.select(this.svgRef.nativeElement).selectAll(`.${key}`)\n            .data(this.info.data\n                .map(d => d[key])\n                .filter(d => d['haveAxis'] || d['haveLegend'])\n            ).enter()\n            .append('rect')\n            .attr('x', d => d.x * ratio)\n            .attr('y', d => d.y * ratio)\n            .attr('width', d => d.width * ratio)\n            .attr('height', d => d.height * ratio)\n            .attr('fill', color)\n            .attr('fill-opacity', 0.2);\n    }\n\n    private drawHistogram() {\n        const indexDict = {};\n        VIS_TYPES.forEach((d, i) => {\n            indexDict[d] = i;\n        });\n        let data = new Array(VIS_TYPES.length).fill(0);\n        this.info.data.map(d => d.visType).forEach(d => {\n            data[indexDict[d]] += 1;\n        });\n        data = data.map((d, i) => ({\n            type: VIS_TYPES[i],\n            count: d,\n        }));\n\n        const xScale = d3.scaleBand().paddingInner(0.3)\n            .range([0, this.histTf.width])\n            .domain(VIS_TYPES);\n\n        const yScale = this.histTf.yLinear(d3.max(data, d => d.count));\n\n        this.histG.append('g').attr('transform', translate(0, this.histTf.height))\n          .call(d3.axisBottom(xScale))\n          .selectAll('text')\n            .attr('transform', 'rotate(-60)')\n            .attr('text-anchor', 'end')\n            .attr('dy', 0)\n            .attr('dx', -8);\n\n        this.histG.append('g').call(d3.axisLeft(yScale).ticks(3));\n\n        this.histG.selectAll('rect').data(data).enter()\n          .append('rect')\n            .attr('x', d => xScale(d.type))\n            .attr('y', d => yScale(d.count))\n            .attr('width', xScale.bandwidth())\n            .attr('height', d => this.histTf.height - yScale(d.count))\n            .attr('fill', 'indigo');\n    }\n\n}\n","module.exports = \"<div class=\\\"w-100 h-100 p-2 d-flex flex-wrap\\\">\\n    <div *ngFor=\\\"let imageElem of imageList\\\" class=\\\"w-20 h-50 border\\\">\\n        <app-gallery-elem [imageElem]=\\\"imageElem\\\">\\n\\n        </app-gallery-elem>\\n    </div>\\n</div>\\n\"","module.exports = \".w-20 {\\n  width: 20% !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZ2FsbGVyeS9DOlxcVXNlcnNcXGp1bmhvZVxcSENJTFxcZGV2XFxjaGFydC1kYXRhc2V0XFxjbGllbnQvc3JjXFxhcHBcXGdhbGxlcnlcXGdhbGxlcnkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxxQkFBcUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2dhbGxlcnkvZ2FsbGVyeS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi53LTIwIHtcclxuICAgIHdpZHRoOiAyMCUgIWltcG9ydGFudDtcclxufVxyXG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NetworkService } from '../network.service';\nimport { ImageElem } from '../data';\n\n@Component({\n    selector: 'app-gallery',\n    templateUrl: './gallery.component.html',\n    styleUrls: ['./gallery.component.scss']\n})\nexport class GalleryComponent implements OnInit {\n\n    public imageList: ImageElem[] = [];\n    constructor(private network: NetworkService) { }\n\n    ngOnInit() {\n        this.network.getList(1)\n            .then(pairs => {\n                this.imageList = pairs.map(pair => new ImageElem(pair));\n            });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ImageElem, ImageInfo } from './data';\nimport { FormGroup } from '@angular/forms';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NetworkService {\n\n    private BASE_URL = 'https://147.46.240.21:1218/';\n    constructor(private http: HttpClient) { }\n\n    getTotalImageLength(): Promise<number> {\n        return this.http.get(this.BASE_URL + 'image_length')\n            .toPromise().then((raw: any) => raw['length']);\n    }\n\n    getList(labeled = 0): Promise<number[]> {\n        return this.http.get(this.BASE_URL + `?labeled=${labeled}`)\n            .toPromise()\n            .then(raw => raw as number[]);\n    }\n\n    getAnnotation(name: string): Promise<ImageInfo> {\n        return this.http.get(this.BASE_URL + 'annotation/' + name)\n            .toPromise()\n            .then(raw => new ImageInfo(raw));\n    }\n\n    getImage(name: string): Promise<Blob> {\n        return this.http.get(this.BASE_URL + name, {responseType: 'blob'})\n            .toPromise();\n    }\n\n    submit(imageElem: HTMLImageElement, image: ImageElem, formGroup: FormGroup): Promise<number> {\n        const ratio = imageElem.naturalHeight / imageElem.height;\n        const raw = formGroup.getRawValue();\n        const body = { raw: null, name: image.name, index: image.index, semi: false };\n\n        const clamp = (value: number, min: number, max: number) => {\n            return Math.min(max, Math.max(min, value));\n        };\n\n        const mulRatio = (rectObj) => {\n            rectObj.x = clamp(+rectObj.x - 10, 0, imageElem.width);\n            rectObj.y = clamp(+rectObj.y - 10, 0, imageElem.height);\n            rectObj.width = (+rectObj.width - Math.max(0, (rectObj.x + +rectObj.width - imageElem.width)));\n            rectObj.height = (+rectObj.height - Math.max(0, (rectObj.y + +rectObj.height - imageElem.height)));\n            rectObj.x *= ratio;\n            rectObj.y *= ratio;\n            rectObj.width *= ratio;\n            rectObj.height *= ratio;\n            return rectObj;\n        }\n\n        if (raw.legend.haveLegend) {\n            raw.legend = mulRatio(raw.legend);\n        }\n\n        if (raw.xAxis.haveAxis) {\n            raw.xAxis = mulRatio(raw.xAxis);\n        }\n\n        if (raw.yAxis.haveAxis) {\n            raw.yAxis = mulRatio(raw.yAxis);\n        }\n        body.raw = raw;\n\n        return this.http.post(this.BASE_URL + 'submit', body)\n            .toPromise().then((raw: any[]) => raw[0] as number);\n    }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\nimport 'hammerjs';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"sourceRoot":""}